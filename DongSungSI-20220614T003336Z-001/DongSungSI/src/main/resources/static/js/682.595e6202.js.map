{"version":3,"file":"js/682.595e6202.js","mappings":"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","sources":["webpack://front-end/./src/components/UploadImage.vue?ec00","webpack://front-end/./src/services/UploadFilesService.js","webpack://front-end/src/components/UploadImage.vue","webpack://front-end/./src/components/UploadImage.vue?1dc7","webpack://front-end/./src/components/UploadImage.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container mt-3\"},[_c('div',{staticClass:\"row justify-content-md-center\"},[_c('div',{staticClass:\"col-8\"},[_c('label',{staticClass:\"btn btn-default p-0\"},[_c('input',{ref:\"file\",attrs:{\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":_vm.selectImage}})])]),_c('div',{staticClass:\"col-4\"},[_c('button',{staticClass:\"btn btn-success btn-sm float-right\",attrs:{\"disabled\":!_vm.currentImage},on:{\"click\":_vm.upload}},[_vm._v(\" Upload \")])])]),(_vm.currentImage)?_c('div',{staticClass:\"progress\"},[_c('div',{staticClass:\"progress-bar progress-bar-info\",style:({ width: _vm.progress + '%' }),attrs:{\"role\":\"progressbar\",\"aria-valuenow\":_vm.progress,\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\"}},[_vm._v(\" \"+_vm._s(_vm.progress)+\"% \")])]):_vm._e(),(_vm.previewImage)?_c('div',[_c('div',[_c('img',{staticClass:\"preview my-3\",attrs:{\"src\":_vm.previewImage,\"alt\":\"\"}})])]):_vm._e(),(_vm.message)?_c('div',{staticClass:\"alert alert-secondary\",attrs:{\"role\":\"alert\"}},[_vm._v(\" \"+_vm._s(_vm.message)+\" \")]):_vm._e(),_vm._l((_vm.imageInfo),function(image,index){return _c('div',{key:index,staticClass:\"card mt-3\"},[_c('div',{staticClass:\"card-header\"},[_vm._v(\"이미지 번호 : \"+_vm._s(image.id))]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-5 col-md-offset-0\"},[_c('figure',[_c('img',{staticClass:\"img-thumbnail\",attrs:{\"src\":image.url}})])]),_c('div',{staticClass:\"col-md-6 col-md-offset-0 description\"},[_c('p',{domProps:{\"innerHTML\":_vm._s(image.name)}}),_c('p',{staticClass:\"price\"},[_vm._v(_vm._s(image.url))])])])])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import http from \"../http-common\";\r\n\r\nclass UploadFilesService {\r\n    // upload를 위한 메소드\r\n    // springboot 서버로 insert문 호출\r\n    upload(file, onUploadProgress) {\r\n        // 자바스크립트 제공 클래스\r\n        // <form> 태그로 이미지 전송을 해야함 : json 형태 x\r\n        // <form> == FormData()\r\n        let formData = new FormData();\r\n\r\n        // vue에서 선택한 파일을 form 데이터로 담기\r\n        formData.append(\"file\", file);\r\n\r\n        return http.post(\"/upload\", formData, {\r\n            headers: {\r\n                // 이미지 전송 형태 : json 안됨\r\n                \"Content-Type\":\"multipart/form-data\"\r\n            },\r\n            // 이미지 처리 결과를 화면에 프로그래스바로\r\n            //  보여주기 위해 실행(함수)\r\n            onUploadProgress\r\n        });\r\n    }\r\n\r\n    // 이미지를 서버에서 다운로드 받음\r\n    //  select 문 호출\r\n    getFiles() {\r\n        return http.get(\"/files\");\r\n    }\r\n}\r\n\r\n// 외부 파일(js, vue)에서 사용할 수 있게 아래 이름으로 export\r\nexport default new UploadFilesService();","<template>\r\n  <div class=\"container mt-3\">\r\n    <!-- TODO: 수정 필요 -->\r\n    <!-- row 시작 -->\r\n    <div class=\"row justify-content-md-center\">\r\n      <div class=\"col-8\">\r\n        <label class=\"btn btn-default p-0\">\r\n          <!-- 파일 선택상자 -->\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            ref=\"file\"\r\n            @change=\"selectImage\"\r\n          />\r\n        </label>\r\n      </div>\r\n\r\n      <div class=\"col-4\">\r\n        <!-- 서버에 insert 문 호출 -->\r\n        <button\r\n          class=\"btn btn-success btn-sm float-right\"\r\n          :disabled=\"!currentImage\"\r\n          @click=\"upload\"\r\n        >\r\n          Upload\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <!-- row 끝 -->\r\n\r\n    <!-- 프로그래스 바 시작-->\r\n    <div v-if=\"currentImage\" class=\"progress\">\r\n      <div\r\n        class=\"progress-bar progress-bar-info\"\r\n        role=\"progressbar\"\r\n        :style=\"{ width: progress + '%' }\"\r\n        :aria-valuenow=\"progress\"\r\n        aria-valuemin=\"0\"\r\n        aria-valuemax=\"100\"\r\n      >\r\n        {{ progress }}%\r\n      </div>\r\n    </div>\r\n    <!-- 프로그래스 바 끝-->\r\n\r\n    <!-- 미리보기 이미지 시작-->\r\n    <div v-if=\"previewImage\">\r\n      <div>\r\n        <img class=\"preview my-3\" :src=\"previewImage\" alt=\"\" />\r\n      </div>\r\n    </div>\r\n    <!--  미리보기 이미지 끝 -->\r\n\r\n    <!-- 서버 에러 메세지가 있을경우 아래 출력 -->\r\n    <div v-if=\"message\" class=\"alert alert-secondary\" role=\"alert\">\r\n      {{ message }}\r\n    </div>\r\n\r\n    <!-- 쇼핑 카트 형태 디자인 -->\r\n    <!-- v-for 시작 -->\r\n    <div class=\"card mt-3\" \r\n        v-for=\"(image, index) in imageInfo\" \r\n        :key=\"index\"\r\n    >\r\n    <div class=\"card-header\">이미지 번호 : {{ image.id }}</div>\r\n      <div class=\"row\">\r\n        <div class=\"col-md-5 col-md-offset-0\">\r\n          <figure>\r\n            <img class=\"img-thumbnail\" :src=\"image.url\" />\r\n          </figure>\r\n        </div>\r\n        <div class=\"col-md-6 col-md-offset-0 description\">\r\n          <p v-html=\"image.name\"></p>\r\n          <p class=\"price\">{{ image.url }}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- v-for 종료 -->\r\n\r\n    <!-- list(목록) 이미지 정보를 출력 -->\r\n    <!-- <div class=\"card mt-3\">\r\n      <div class=\"card-header\">List of Image</div>\r\n      <ul class=\"list-group list-group-flush\">\r\n        <li\r\n          class=\"list-group-item\"\r\n          v-for=\"(image, index) in imageInfo\"\r\n          :key=\"index\"\r\n        >\r\n          <a :href=\"image.url\">{{ image.name }}</a>\r\n        </li>\r\n      </ul>\r\n    </div> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport UploadService from \"../services/UploadFilesService\";\r\n\r\nexport default {\r\n  name: \"upload-image\",\r\n  data() {\r\n    // 변수 초기화\r\n    return {\r\n      currentImage: undefined, // 현재이미지\r\n      previewImage: undefined, // 미리보기 이미지\r\n      progress: 0, // 프로그래스바를 위한 변수\r\n      message: \"\",\r\n      imageInfo: [], // 이미지 정보 객체배열\r\n    };\r\n  },\r\n  methods: {\r\n    // 이미지를 선택하면 변수에 저장하는 메소드\r\n    selectImage() {\r\n      // 파일선택상자에서 첫번째로 선택한 이미지가 저장됨\r\n      this.currentImage = this.$refs.file.files.item(0);\r\n      // 아래는 미리보기 이미지를 위한 주소가 저장됨\r\n      this.previewImage = URL.createObjectURL(this.currentImage);\r\n      this.progress = 0;\r\n      this.message = \"\";\r\n    },\r\n    // 파일 업로드를 위한 메소드\r\n    upload() {\r\n      this.progress = 0;\r\n\r\n      // 서버에 이미지 업로드 요청(insert 문 실행)\r\n      UploadService.upload(this.currentImage, (event) => {\r\n        // 파일이 업로드될때 진척상황이 저장됨(%)\r\n        this.progress = Math.round((100 * event.loaded) / event.total);\r\n      })\r\n        // 성공하면 then 으로 들어옴(서버에서 응답한 객체)\r\n        .then((response) => {\r\n          // 서버쪽 응답 메시지 저장\r\n          this.message = response.data.message;\r\n          // 서버쪽에 insert가 잘되었는지\r\n          // select문 호출\r\n          return UploadService.getFiles();\r\n        })\r\n        // 성공하면 then으로 들어옴(서버쪽 객체 받음)\r\n        .then((image) => {\r\n          this.imageInfo = image.data;\r\n        })\r\n        // 실패하면 catch으로 들어옴\r\n        // 화면에 실패메세지 출력\r\n        .catch((err) => {\r\n          this.progress = 0;\r\n          this.message = \"Could not upload the image!\" + err;\r\n          this.currentImage = undefined;\r\n        });\r\n    },\r\n  },\r\n  // 화면이 뜨자마자 실행되는 이벤트\r\n  mounted() {\r\n    // springboot 서버에 이미지파일 요청\r\n    UploadService.getFiles()\r\n      // 성공하면 then에 들어옴(객체, 응답메세지)\r\n      .then((response) => {\r\n        // response.data : 서버쪽에서 전송된 객체\r\n        this.imageInfo = response.data;\r\n      });\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.preview {\r\n  max-width: 200px;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UploadImage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UploadImage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UploadImage.vue?vue&type=template&id=a64b3b2c&\"\nimport script from \"./UploadImage.vue?vue&type=script&lang=js&\"\nexport * from \"./UploadImage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UploadImage.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","on","selectImage","currentImage","upload","_v","style","width","progress","_s","_e","previewImage","message","_l","image","index","key","id","url","domProps","name","staticRenderFns","UploadFilesService","file","onUploadProgress","formData","FormData","append","http","headers","getFiles","data","imageInfo","methods","UploadService","then","response","catch","err","mounted","component"],"sourceRoot":""}